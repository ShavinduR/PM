<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Peak Moments Studio - Mobile</title>
    <meta name="description" content="Peak Moments Studio - Professional photography in Sri Lanka">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* ===== Mobile First CSS ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #ff5555;
            --primary-dark: #e03e3e;
            --bg: #ffffff;
            --text: #222222;
            --text-light: #666666;
            --border: #e0e0e0;
            --card-bg: #ffffff;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        body.dark-mode {
            --primary: #ff7777;
            --bg: #1a1a1a;
            --text: #ffffff;
            --text-light: #cccccc;
            --border: #333333;
            --card-bg: #2a2a2a;
            --shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.5;
            transition: background 0.3s, color 0.3s;
            padding-bottom: 80px;
        }

        /* Container */
        .container {
            padding: 0 16px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            background: var(--bg);
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            z-index: 100;
            backdrop-filter: blur(10px);
            background: rgba(var(--bg), 0.95);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo img {
            width: 36px;
            height: auto;
        }

        .logo span {
            font-weight: 700;
            color: var(--primary);
        }

        .theme-toggle {
            background: none;
            border: none;
            font-size: 1.4rem;
            color: var(--text);
            cursor: pointer;
            padding: 8px;
        }

        /* Hero Section with Background Image */
        .hero {
            padding: 80px 0;
            text-align: center;
            background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('images/featured/1.jpg');
            background-size: cover;
            background-position: center;
            color: white;
        }

        .hero h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 12px;
            color: white;
        }

        .hero p {
            color: rgba(255,255,255,0.9);
            margin-bottom: 24px;
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            border-radius: 40px;
            text-decoration: none;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            margin: 4px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-outline {
            border: 2px solid white;
            color: white;
            background: transparent;
        }

        /* Section Headers */
        .section-header {
            padding: 24px 0 16px;
        }

        .section-header h2 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .section-header p {
            color: var(--text-light);
            font-size: 1rem;
        }

        /* Featured Grid (2 columns on mobile) */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .photo-card {
            position: relative;
            aspect-ratio: 3/4;
            border-radius: 12px;
            overflow: hidden;
            background: var(--border);
            box-shadow: var(--shadow);
        }

        .photo-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s;
        }

        .photo-card:active img {
            transform: scale(1.05);
        }

        .photo-card .caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            color: white;
            padding: 12px 8px 8px;
            font-size: 0.85rem;
            font-weight: 500;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .photo-card:active .caption {
            opacity: 1;
        }

        /* Categories */
        .categories {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .category-item {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px 12px;
            text-align: center;
        }

        .category-item i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .category-item h3 {
            font-size: 1.1rem;
            margin-bottom: 4px;
        }

        .category-item p {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 12px;
        }

        .category-link {
            color: var(--primary);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 600;
        }

        /* Albums List (Horizontal Scroll) */
        .albums-scroll {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding: 8px 0 16px;
            scrollbar-width: none;
        }

        .albums-scroll::-webkit-scrollbar {
            display: none;
        }

        .album-chip {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 40px;
            padding: 10px 20px;
            white-space: nowrap;
            font-weight: 500;
            box-shadow: var(--shadow);
        }

        .album-chip.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Search Bar - Sticky */
        .search-wrapper {
            position: sticky;
            top: 70px;
            background: var(--bg);
            padding: 12px 0;
            z-index: 90;
        }

        .search-box {
            display: flex;
            align-items: center;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 40px;
            padding: 8px 16px;
        }

        .search-box i {
            color: var(--text-light);
            margin-right: 8px;
        }

        .search-box input {
            flex: 1;
            background: none;
            border: none;
            outline: none;
            color: var(--text);
            font-size: 1rem;
        }

        /* Photo Grid (for portfolio view) */
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 8px;
            margin-top: 16px;
        }

        /* About Section */
        .about-section {
            padding: 24px 0;
        }

        .about-logo {
            width: 120px;
            margin: 0 auto 20px;
            display: block;
        }

        .about-text {
            text-align: center;
        }

        .about-text h2 {
            font-size: 2rem;
            margin-bottom: 16px;
        }

        .testimonial-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 12px;
        }

        .testimonial-card i {
            color: var(--primary);
            opacity: 0.5;
            margin-bottom: 8px;
        }

        .testimonial-card cite {
            display: block;
            text-align: right;
            color: var(--primary);
            margin-top: 8px;
            font-weight: 600;
        }

        /* Contact Section */
        .contact-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }

        .contact-item i {
            font-size: 1.5rem;
            color: var(--primary);
            width: 30px;
        }

        .contact-item a {
            color: var(--text);
            text-decoration: none;
        }

        .social-icons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 24px 0;
        }

        .social-icons a {
            color: var(--text);
            font-size: 1.8rem;
        }

        .social-icons a:hover {
            color: var(--primary);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg);
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 200;
            backdrop-filter: blur(10px);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-light);
            text-decoration: none;
            font-size: 0.8rem;
        }

        .nav-item i {
            font-size: 1.4rem;
            margin-bottom: 4px;
        }

        .nav-item.active {
            color: var(--primary);
        }

        /* Lightbox */
        .lightbox {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            flex-direction: column;
        }

        .lightbox img {
            max-width: 95%;
            max-height: 70vh;
            border-radius: 8px;
        }

        .lightbox-caption {
            margin-top: 12px;
            color: white;
            background: rgba(0,0,0,0.6);
            padding: 6px 16px;
            border-radius: 30px;
            font-size: 0.95rem;
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2.5rem;
            color: white;
            cursor: pointer;
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.1);
            color: white;
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .lightbox-prev { left: 10px; }
        .lightbox-next { right: 10px; }

        /* Hide sections by default */
        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        /* Loading state */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-light);
        }

        /* Top Button */
        .top-btn {
            position: fixed;
            bottom: 80px;  /* bottom navigation එකට උඩින් */
            right: 20px;
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: none;  /* මුලින් hide */
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            border: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            cursor: pointer;
            z-index: 300;
            transition: all 0.3s;
        }

        .top-btn:hover {
            transform: scale(1.1);
        }

        /* Portfolio page active විට පමණක් පෙන්වන්න */
        body.portfolio-active .top-btn {
            display: flex;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <img src="images/logo/Peak moments logo.png" alt="Logo" onerror="this.src='https://via.placeholder.com/36'">
            <span>Peak Moments</span>
        </div>
        <button class="theme-toggle" id="themeToggle">
            <i class="fas fa-sun" id="themeIcon"></i>
        </button>
    </header>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <a href="#" class="nav-item active" data-page="home">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="#" class="nav-item" data-page="portfolio">
            <i class="fas fa-images"></i>
            <span>Portfolio</span>
        </a>
        <a href="#" class="nav-item" data-page="about">
            <i class="fas fa-info-circle"></i>
            <span>About</span>
        </a>
        <a href="#" class="nav-item" data-page="contact">
            <i class="fas fa-envelope"></i>
            <span>Contact</span>
        </a>
    </div>

    <!-- Main Content -->
    <main>
        <!-- HOME PAGE -->
        <div id="home" class="page-section active">
            <!-- Hero -->
            <section class="hero">
                <div class="container">
                    <h1>Capturing Moments</h1>
                    <p>Professional lifestyle photography in Sri Lanka</p>
                    <div>
                        <button class="btn btn-primary" onclick="showPage('portfolio')">View Portfolio</button>
                        <button class="btn btn-outline" onclick="showPage('contact')">Contact Us</button>
                    </div>
                </div>
            </section>

            <!-- Featured Photos -->
            <section class="container">
                <div class="section-header">
                    <h2>Featured Work</h2>
                    <p>Recent favorites</p>
                </div>
                <div class="grid-2" id="home-featured">
                    <!-- JS will load here -->
                    <div class="loading">Loading...</div>
                </div>
            </section>

            <!-- Categories -->
            <section class="container">
                <div class="section-header">
                    <h2>Services</h2>
                    <p>What we offer</p>
                </div>
                <div class="categories">
                    <div class="category-item">
                        <i class="fas fa-baby"></i>
                        <h3>Maternity</h3>
                        <p>New beginnings</p>
                        <a href="#" class="category-link" onclick="showPortfolioCategory('maternity'); return false;">View →</a>
                    </div>
                    <div class="category-item">
                        <i class="fas fa-briefcase"></i>
                        <h3>Branding</h3>
                        <p>Personal & business</p>
                        <a href="#" class="category-link" onclick="showPortfolioCategory('branding'); return false;">View →</a>
                    </div>
                    <div class="category-item">
                        <i class="fas fa-birthday-cake"></i>
                        <h3>Birthdays</h3>
                        <p>Celebrations</p>
                        <a href="#" class="category-link" onclick="showPortfolioCategory('birthdays'); return false;">View →</a>
                    </div>
                    <div class="category-item">
                        <i class="fas fa-users"></i>
                        <h3>Family</h3>
                        <p>Love & connection</p>
                        <a href="#" class="category-link" onclick="showPortfolioCategory('family'); return false;">View →</a>
                    </div>
                </div>
            </section>
        </div>

        <!-- PORTFOLIO PAGE -->
        <div id="portfolio" class="page-section">
            <div class="container">
                <div class="section-header">
                    <h2>Portfolio</h2>
                    <p>Browse our collections</p>
                </div>

                <!-- Search -->
                <div class="search-wrapper">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="Search photos...">
                    </div>
                </div>

                <!-- Album Chips (Horizontal Scroll) -->
                <div class="albums-scroll" id="albumChips">
                    <!-- JS will generate -->
                </div>

                <!-- Photo Grid -->
                <div class="photo-grid" id="portfolio-grid">
                    <div class="loading">Loading...</div>
                </div>
            </div>
        </div>

        <!-- ABOUT PAGE -->
        <div id="about" class="page-section">
            <div class="container">
                <div class="about-section">
                    <img src="images/logo/Peak moments logo.png" alt="Logo" class="about-logo" onerror="this.style.display='none'">
                    
                    <div class="about-text">
                        <h2>About Us</h2>
                        <p class="about-tagline" style="color: var(--primary); font-weight: 500; margin-bottom: 16px;">
                            Capturing the Moments You Lived, But Might Have Missed.
                        </p>
                        <p style="margin-bottom: 16px;">
                            We believe that lifestyle photography is about real moments that are honest, emotional, and beautifully lived. Through photography and content creation, we capture everyday stories in a way that feels natural yet thoughtfully crafted.
                        </p>
                        <p style="margin-bottom: 24px;">
                            From intimate personal sessions to expressive lifestyle narratives, our approach is rooted in creativity and intention. Each frame is carefully crafted, transforming fleeting moments into timeless visuals.
                        </p>
                    </div>

                    <h3 style="margin: 32px 0 16px;">What Clients Say</h3>
                    
                    <div class="testimonial-card">
                        <i class="fas fa-quote-left"></i>
                        <p>"Rumesh captured the essence of our maternity journey beautifully. The photos are timeless treasures we'll cherish forever."</p>
                        <cite>— Sanjala</cite>
                    </div>
                    
                    <div class="testimonial-card">
                        <i class="fas fa-quote-left"></i>
                        <p>"Amazing personal branding shoot! Professional, creative, and the results exceeded our expectations."</p>
                        <cite>— Senuri</cite>
                    </div>
                    
                    <div class="testimonial-card">
                        <i class="fas fa-quote-left"></i>
                        <p>"Wonderful family session. Rumesh made us feel so comfortable and the photos are absolutely stunning."</p>
                        <cite>— Tharuka</cite>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTACT PAGE -->
        <div id="contact" class="page-section">
            <div class="container">
                <div class="section-header">
                    <h2>Contact Us</h2>
                    <p>Get in touch</p>
                </div>

                <div class="contact-card">
                    <div class="contact-item">
                        <i class="fab fa-whatsapp"></i>
                        <div>
                            <h3>WhatsApp</h3>
                            <a href="https://wa.me/+94766782913">076 678 2913</a>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <h3>Email</h3>
                            <a href="mailto:peakmomentsevents@gmail.com">peakmomentsevents@gmail.com</a>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>
                            <h3>Address</h3>
                            <a href="https://maps.app.goo.gl/pBpgkr2SLqU1BCiDA" target="_blank">Polgasovita, Sri Lanka</a>
                        </div>
                    </div>
                </div>

                <div class="social-icons">
                    <a href="https://www.instagram.com/peakmomentslifestyle/" target="_blank"><i class="fab fa-instagram"></i></a>
                    <a href="https://www.facebook.com/profile.php?id=100069819850859" target="_blank"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://www.tiktok.com/@peakmomentslifestyle" target="_blank"><i class="fab fa-tiktok"></i></a>
                    <a href="https://youtube.com/@peakmomentsevents" target="_blank"><i class="fab fa-youtube"></i></a>
                </div>

                <!-- Simple Contact Form -->
                <div class="contact-card" style="margin-top: 24px;">
                    <h3 style="margin-bottom: 16px;">Send a Message</h3>
                    <form id="contactForm" onsubmit="event.preventDefault(); alert('Thank you! We\'ll contact you soon.');">
                        <input type="text" placeholder="Your Name" style="width: 100%; padding: 12px; margin-bottom: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text);">
                        <input type="email" placeholder="Your Email" style="width: 100%; padding: 12px; margin-bottom: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text);">
                        <textarea placeholder="Your Message" rows="4" style="width: 100%; padding: 12px; margin-bottom: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text);"></textarea>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Send</button>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
        <span class="lightbox-close" id="lightboxClose">&times;</span>
        <button class="lightbox-nav lightbox-prev" id="lightboxPrev"><i class="fas fa-chevron-left"></i></button>
        <button class="lightbox-nav lightbox-next" id="lightboxNext"><i class="fas fa-chevron-right"></i></button>
        <img id="lightboxImg" src="" alt="">
        <div class="lightbox-caption" id="lightboxCaption"></div>
    </div>

    <script>
        // ========== SINGLE JS FILE ==========
        
        // ----- Data -----
        const albums = {
            home: Array.from({length: 11}, (_, i) => ({
                url: `images/featured/${i + 1}.jpg`,
                alt: `Featured ${i+1}`,
                albumTitle: 'Featured'
            })),
            
            maternity: [
                ...Array.from({length: 14}, (_, i) => ({ url: `images/maternity & newborn/name-1/${i+1}.jpg`, alt: 'Sanjala & Love', albumTitle: 'Sanjala & Love - Maternity' })),
                ...Array.from({length: 7}, (_, i) => ({ url: `images/maternity & newborn/name-2/${i+1}.jpg`, alt: "Tiffany's Joy", albumTitle: "Tiffany's Joy - Maternity" })),
                ...Array.from({length: 8}, (_, i) => ({ url: `images/maternity & newborn/name-3/${i+1}.jpg`, alt: 'Name 3', albumTitle: 'Name 3 - Maternity' }))
            ],
            
            branding: [
                ...Array.from({length: 6}, (_, i) => ({ url: `images/personal branding/name-1/${i+1}.jpg`, alt: 'Senuri Refind', albumTitle: 'Senuri Refind - Branding' })),
                ...Array.from({length: 16}, (_, i) => ({ url: `images/personal branding/name-2/${i+1}.jpg`, alt: 'Her Lehenga Story', albumTitle: 'Her Lehenga Story - Branding' })),
                ...Array.from({length: 11}, (_, i) => ({ url: `images/personal branding/name-3/${i+1}.jpg`, alt: 'vvv', albumTitle: 'vvv - Branding' }))
            ],
            
            birthdays: [
                ...Array.from({length: 11}, (_, i) => ({ url: `images/birthdays & celebrations/name-1/${i+1}.jpg`, alt: 'Ameera turns one', albumTitle: 'Ameera turns one - Birthdays' })),
                ...Array.from({length: 10}, (_, i) => ({ url: `images/birthdays & celebrations/name-2/${i+1}.jpg`, alt: "Emie's First Birthday", albumTitle: "Emie's First Birthday - Birthdays" })),
                ...Array.from({length: 14}, (_, i) => ({ url: `images/birthdays & celebrations/name-3/${i+1}.jpg`, alt: 'Sweet Thej', albumTitle: 'Sweet Thej - Birthdays' }))
            ],
            
            family: [
                ...Array.from({length: 5}, (_, i) => ({ url: `images/family & couples/name-1/${i+1}.jpg`, alt: 'Cozy Christmas', albumTitle: 'Cozy Christmas - Family' })),
                ...Array.from({length: 6}, (_, i) => ({ url: `images/family & couples/name-2/${i+1}.jpg`, alt: "Nauki's Christmas", albumTitle: "Nauki's Christmas - Family" })),
                ...Array.from({length: 6}, (_, i) => ({ url: `images/family & couples/name-3/${i+1}.jpg`, alt: 'Little Artist', albumTitle: 'Little Artist - Family' }))
            ],
            
            events: [
                ...Array.from({length: 9}, (_, i) => ({ url: `images/events & gathering/name-1/${i+1}.jpg`, alt: "Prithika's Bridle Shower", albumTitle: "Prithika's Bridle Shower - Events" })),
                ...Array.from({length: 8}, (_, i) => ({ url: `images/events & gathering/name-2/${i+1}.jpg`, alt: 'Name 2', albumTitle: 'Name 2 - Events' })),
                ...Array.from({length: 12}, (_, i) => ({ url: `images/events & gathering/name-3/${i+1}.jpg`, alt: 'Name 3', albumTitle: 'Name 3 - Events' }))
            ]
        };

        // Master list for search
        let masterPhotos = [];
        Object.keys(albums).forEach(key => {
            if (key !== 'home') {
                albums[key].forEach(p => masterPhotos.push(p));
            }
        });

        // ----- State -----
        let currentPage = 'home';
        let currentPhotos = [];
        let currentIndex = 0;
        let currentCategory = 'all';

        // ----- DOM Elements -----
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const navItems = document.querySelectorAll('.nav-item');
        const pages = document.querySelectorAll('.page-section');
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightboxImg');
        const lightboxCaption = document.getElementById('lightboxCaption');
        const lightboxClose = document.getElementById('lightboxClose');
        const lightboxPrev = document.getElementById('lightboxPrev');
        const lightboxNext = document.getElementById('lightboxNext');

        // ----- Theme -----
        let isDark = localStorage.getItem('theme') === 'dark';
        if (isDark) {
            document.body.classList.add('dark-mode');
            themeIcon.classList.replace('fa-sun', 'fa-moon');
        }

        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            isDark = !isDark;
            if (isDark) {
                themeIcon.classList.replace('fa-sun', 'fa-moon');
                localStorage.setItem('theme', 'dark');
            } else {
                themeIcon.classList.replace('fa-moon', 'fa-sun');
                localStorage.setItem('theme', 'light');
            }
        });

        // ----- Page Navigation -----
        function showPage(pageId) {
            currentPage = pageId;
            pages.forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.dataset.page === pageId) {
                    item.classList.add('active');
                }
            });

            // Portfolio page active නම් body එකට class එකක් දාන්න (top button එකට)
            if (pageId === 'portfolio') {
                document.body.classList.add('portfolio-active');
                // Top button එකේ display reset කරන්න
                checkTopButtonVisibility();
            } else {
                document.body.classList.remove('portfolio-active');
            }

            // Load content based on page
            if (pageId === 'home') loadHomeFeatured();
            if (pageId === 'portfolio') loadPortfolio();
        }

        navItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(item.dataset.page);
            });
        });

        window.showPage = showPage;
        window.showPortfolioCategory = function(category) {
            showPage('portfolio');
            setTimeout(() => {
                filterByCategory(category);
            }, 100);
        };

        // ----- Home Featured (random 4) -----
        function loadHomeFeatured() {
            const container = document.getElementById('home-featured');
            const allPhotos = [...albums.maternity, ...albums.branding, ...albums.birthdays, ...albums.family, ...albums.events];
            const shuffled = allPhotos.sort(() => 0.5 - Math.random()).slice(0, 4);
            
            container.innerHTML = '';
            shuffled.forEach((photo, idx) => {
                const card = document.createElement('div');
                card.className = 'photo-card';
                card.innerHTML = `<img src="${photo.url}" alt="${photo.alt}" onerror="this.src='https://via.placeholder.com/300?text=Image+Not+Found'">
                                 <div class="caption">${photo.albumTitle}</div>`;
                card.addEventListener('click', () => openLightbox(shuffled, idx));
                container.appendChild(card);
            });
        }

        // ----- Portfolio -----
        function loadPortfolio() {
            buildAlbumChips();
            filterByCategory('all');
            setupSearch();
        }

        function buildAlbumChips() {
            const chips = [
                { id: 'all', name: 'All' },
                { id: 'maternity', name: 'Maternity' },
                { id: 'branding', name: 'Branding' },
                { id: 'birthdays', name: 'Birthdays' },
                { id: 'family', name: 'Family' },
                { id: 'events', name: 'Events' }
            ];
            
            const container = document.getElementById('albumChips');
            container.innerHTML = '';
            
            chips.forEach(chip => {
                const btn = document.createElement('button');
                btn.className = `album-chip ${chip.id === currentCategory ? 'active' : ''}`;
                btn.textContent = chip.name;
                btn.dataset.category = chip.id;
                btn.addEventListener('click', () => filterByCategory(chip.id));
                container.appendChild(btn);
            });
        }

        function filterByCategory(category) {
            currentCategory = category;
            
            // Update active chip
            document.querySelectorAll('.album-chip').forEach(chip => {
                chip.classList.remove('active');
                if (chip.dataset.category === category) {
                    chip.classList.add('active');
                }
            });
            
            // Filter photos
            let photos = [];
            if (category === 'all') {
                photos = masterPhotos;
            } else {
                photos = albums[category] || [];
            }
            
            displayPortfolioPhotos(photos);
        }

        function displayPortfolioPhotos(photos) {
            currentPhotos = photos;
            const grid = document.getElementById('portfolio-grid');
            
            if (photos.length === 0) {
                grid.innerHTML = '<p style="text-align:center; padding:40px;">No photos found</p>';
                return;
            }
            
            grid.innerHTML = '';
            photos.forEach((photo, idx) => {
                const card = document.createElement('div');
                card.className = 'photo-card';
                card.innerHTML = `<img src="${photo.url}" alt="${photo.alt}" loading="lazy" onerror="this.src='https://via.placeholder.com/300?text=Not+Found'">
                                 <div class="caption">${photo.albumTitle}</div>`;
                card.addEventListener('click', () => openLightbox(photos, idx));
                grid.appendChild(card);
            });
        }

        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', (e) => {
                const term = e.target.value.toLowerCase().trim();
                if (!term) {
                    filterByCategory(currentCategory);
                    return;
                }
                
                const results = masterPhotos.filter(p => 
                    p.alt.toLowerCase().includes(term) || 
                    p.albumTitle.toLowerCase().includes(term)
                );
                
                displayPortfolioPhotos(results);
            });
        }

        // ----- Lightbox -----
        function openLightbox(photos, index) {
            currentPhotos = photos;
            currentIndex = index;
            updateLightbox();
            lightbox.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function updateLightbox() {
            const photo = currentPhotos[currentIndex];
            lightboxImg.src = photo.url;
            lightboxImg.alt = photo.alt;
            lightboxCaption.textContent = `${photo.albumTitle} (${currentIndex + 1}/${currentPhotos.length})`;
        }

        lightboxClose.addEventListener('click', () => {
            lightbox.style.display = 'none';
            document.body.style.overflow = '';
        });

        lightboxPrev.addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + currentPhotos.length) % currentPhotos.length;
            updateLightbox();
        });

        lightboxNext.addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % currentPhotos.length;
            updateLightbox();
        });

        // Keyboard nav
        document.addEventListener('keydown', (e) => {
            if (lightbox.style.display !== 'flex') return;
            if (e.key === 'ArrowLeft') lightboxPrev.click();
            if (e.key === 'ArrowRight') lightboxNext.click();
            if (e.key === 'Escape') lightboxClose.click();
        });

        // Touch swipe
        let touchStartX = 0;
        lightbox.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        lightbox.addEventListener('touchend', (e) => {
            const diff = touchStartX - e.changedTouches[0].screenX;
            if (Math.abs(diff) > 50) {
                if (diff > 0) lightboxNext.click();
                else lightboxPrev.click();
            }
        });

        // Lightbox click outside
        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) lightboxClose.click();
        });

        // ----- Top Button -----
        const topBtn = document.createElement('button');
        topBtn.className = 'top-btn';
        topBtn.innerHTML = '<i class="fas fa-chevron-up"></i>';
        topBtn.setAttribute('aria-label', 'Scroll to top');
        topBtn.addEventListener('click', () => {
            const portfolioSection = document.querySelector('#portfolio');
            if (portfolioSection) {
                portfolioSection.scrollIntoView({ behavior: 'smooth' });
            }
        });
        document.body.appendChild(topBtn);

        // Scroll event එකෙන් button එක පෙන්වන්න/සඟවන්න
        function checkTopButtonVisibility() {
            if (!document.body.classList.contains('portfolio-active')) return;
            
            const portfolioSection = document.querySelector('#portfolio');
            if (!portfolioSection) return;
            
            const portfolioTop = portfolioSection.offsetTop;
            const scrollY = window.scrollY;
            
            if (scrollY > portfolioTop + 100) {
                topBtn.style.display = 'flex';
            } else {
                topBtn.style.display = 'none';
            }
        }

        window.addEventListener('scroll', () => {
            checkTopButtonVisibility();
        });

        // ----- Initial Load -----
        loadHomeFeatured();
    </script>
</body>
</html>